<!DOCTYPE html>
<html lang="en">
<head>
<!--
================================================================
  INDEX.HTML — Clairity Tools by xZiyy
  ----------------------------------------------------------------
  SECTION MAP:
  [1] HEAD        — Meta, Google Fonts, CSS
  [2] CSS         — Design tokens, reset, components, pages
  [3] LOADING     — Full-screen loading overlay
  [4] NAVBAR      — Fixed top nav + mobile drawer
  [5] PAGE: HOME  — About + stats
  [6] PAGE: CREDITS
  [7] PAGE: BRAT  — Brat Image Generator
  [8] PAGE: TIKTOK — TikTok Downloader
  [9] FOOTER
  [10] SCRIPT     — JS: tabs / CountAPI / BratGen / TikTokDL
================================================================
-->

<!-- ═══════════════════════════════════════════
     [1] HEAD — META & FONTS
═══════════════════════════════════════════ -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clairity — Tools</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Rajdhani:wght@300;400;500;600&display=swap" rel="stylesheet">

<!-- ═══════════════════════════════════════════
     [2] CSS
═══════════════════════════════════════════ -->
<style>

/* ── DESIGN TOKENS ── */
:root {
  --c-bg:       #000000;
  --c-deep:     #040404;
  --c-panel:    #0a0a0a;
  --c-surface:  #101010;
  --c-raised:   #161616;
  --c-border:   #222222;
  --c-bhi:      #363636;
  --c-muted:    #444444;
  --c-dim:      #707070;   /* was #555 — labels, eyebrows */
  --c-mid:      #959595;   /* was #777 — secondary text   */
  --c-text:     #b8b8b8;   /* was #999 — body text        */
  --c-bright:   #d4d4d4;   /* was #bbb — bright text      */
  --c-white:    #f0f0f0;   /* was #e0 — headings          */
  --nav-h:      52px;
  --f-display:  'Orbitron', monospace;
  --f-body:     'Rajdhani', sans-serif;
}

/* ── RESET ── */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  background:var(--c-bg);
  color:var(--c-text);
  font-family:var(--f-body);
  min-height:100vh;
  overflow-x:hidden;
}
a{text-decoration:none;color:inherit}
button{cursor:pointer;border:none;outline:none;background:none;font-family:inherit}
input{font-family:inherit}

/* Grid background */
body::before{
  content:'';
  position:fixed;inset:0;
  background-image:
    linear-gradient(rgba(255,255,255,0.015) 1px,transparent 1px),
    linear-gradient(90deg,rgba(255,255,255,0.015) 1px,transparent 1px);
  background-size:44px 44px;
  pointer-events:none;z-index:0;
}

/* Scrollbar */
::-webkit-scrollbar{width:3px;height:3px}
::-webkit-scrollbar-track{background:var(--c-bg)}
::-webkit-scrollbar-thumb{background:var(--c-bhi)}

/* Keyframes */
@keyframes spin    {to{transform:rotate(360deg)}}
@keyframes blink   {0%,100%{opacity:1}50%{opacity:.15}}
@keyframes fadeUp  {from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes countIn {from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}


/* ══════════════════════════════════════════════
   LOADING OVERLAY
══════════════════════════════════════════════ */
#loading{
  position:fixed;inset:0;
  background:rgba(0,0,0,.93);
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:14px;
  z-index:9999;
  transition:opacity .25s;
}
#loading.hidden{opacity:0;pointer-events:none}

.ring{
  width:40px;height:40px;position:relative;
}
.ring::before{
  content:'';position:absolute;inset:0;
  border-radius:50%;border:1px solid var(--c-border);
}
.ring::after{
  content:'';position:absolute;inset:0;
  border-radius:50%;
  border:2px solid transparent;
  border-top-color:var(--c-white);
  animation:spin .8s linear infinite;
}
.ring-label{
  font-family:var(--f-display);
  font-size:.48rem;letter-spacing:5px;
  color:var(--c-mid);text-transform:uppercase;
  animation:blink 1.2s step-end infinite;
}


/* ══════════════════════════════════════════════
   NAVBAR
══════════════════════════════════════════════ */
#navbar{
  position:fixed;top:0;left:0;right:0;
  height:var(--nav-h);
  background:var(--c-panel);
  border-bottom:1px solid var(--c-border);
  display:flex;align-items:center;
  padding:0 18px;gap:16px;
  z-index:200;
}

.nav-brand{
  font-family:var(--f-display);
  font-size:.72rem;font-weight:900;
  letter-spacing:4px;color:var(--c-white);
  text-transform:uppercase;margin-right:auto;
  white-space:nowrap;flex-shrink:0;
}
.nav-brand em{color:var(--c-dim);font-style:normal;font-weight:400}

.nav-tabs{
  display:flex;list-style:none;gap:2px;
}
.n-tab{
  font-family:var(--f-display);
  font-size:.48rem;letter-spacing:2px;
  text-transform:uppercase;
  color:var(--c-mid);
  padding:7px 13px;
  border:1px solid transparent;
  transition:all .2s;
  white-space:nowrap;
  position:relative;
}
.n-tab:hover{color:var(--c-mid);background:var(--c-surface);border-color:var(--c-border)}
.n-tab.active{
  color:var(--c-white);
  background:var(--c-surface);
  border-color:var(--c-bhi);
}
.n-tab.active::after{
  content:'';position:absolute;
  bottom:-1px;left:0;right:0;
  height:1px;background:var(--c-white);
}

/* hamburger */
.n-burger{
  display:none;
  flex-direction:column;gap:5px;
  padding:6px;margin-left:auto;
}
.n-burger span{
  display:block;width:18px;height:1px;
  background:var(--c-mid);transition:.2s;
}

/* mobile drawer */
#nav-drawer{
  display:none;
  position:fixed;
  top:var(--nav-h);left:0;right:0;
  background:var(--c-panel);
  border-bottom:1px solid var(--c-border);
  flex-direction:column;
  z-index:199;
}
#nav-drawer.open{display:flex}
#nav-drawer .n-tab{
  padding:13px 20px;
  border:none;border-radius:0;
}
#nav-drawer .n-tab.active{
  border-left:2px solid var(--c-white);
  background:var(--c-surface);
}
#nav-drawer .n-tab.active::after{display:none}

@media(max-width:600px){
  .nav-tabs{display:none}
  .n-burger{display:flex}
}


/* ══════════════════════════════════════════════
   PAGE LAYOUT
══════════════════════════════════════════════ */
.page-wrap{
  position:relative;z-index:1;
  padding-top:calc(var(--nav-h) + 38px);
  padding-bottom:64px;
  min-height:100vh;
}

.tab-page{
  display:none;
  max-width:500px;
  margin:0 auto;
  padding:0 18px;
  animation:fadeUp .38s ease both;
}
.tab-page.active{display:block}


/* ══════════════════════════════════════════════
   SHARED COMPONENTS
══════════════════════════════════════════════ */

/* Page header */
.pg-eyebrow{
  font-family:var(--f-display);
  font-size:.5rem;letter-spacing:5px;
  color:var(--c-dim);text-transform:uppercase;
  margin-bottom:7px;
}
.pg-title{
  font-family:var(--f-display);
  font-size:1.45rem;font-weight:900;
  letter-spacing:2px;color:var(--c-white);
  text-transform:uppercase;line-height:1;
  margin-bottom:5px;
}
.pg-title span{color:var(--c-mid);font-weight:400}
.pg-rule{width:38px;height:1px;background:var(--c-bhi);margin-bottom:26px}

/* Card */
.card{
  background:var(--c-panel);
  border:1px solid var(--c-border);
  padding:22px;
  position:relative;
  margin-bottom:14px;
}
.card::before{
  content:'';position:absolute;
  top:-1px;left:-1px;
  width:11px;height:11px;
  border-top:2px solid var(--c-mid);
  border-left:2px solid var(--c-mid);
}
.card::after{
  content:'';position:absolute;
  bottom:-1px;right:-1px;
  width:11px;height:11px;
  border-bottom:2px solid var(--c-bhi);
  border-right:2px solid var(--c-bhi);
}

/* Card label */
.c-label{
  font-family:var(--f-display);
  font-size:.5rem;letter-spacing:3px;
  color:var(--c-mid);text-transform:uppercase;
  margin-bottom:15px;
  display:flex;align-items:center;gap:7px;
}
.c-label::before{
  content:'';display:inline-block;
  width:5px;height:5px;
  background:var(--c-muted);
  clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);
}

/* Horizontal rule */
.hr{border:none;border-top:1px solid var(--c-border);margin:18px 0}

/* Form label */
.f-label{
  font-family:var(--f-display);
  font-size:.5rem;letter-spacing:3px;
  color:var(--c-mid);text-transform:uppercase;
  margin-bottom:7px;display:block;
}

/* Input */
.f-input{
  width:100%;
  background:var(--c-surface);
  border:1px solid var(--c-border);
  color:var(--c-white);
  font-family:var(--f-body);
  font-size:1rem;font-weight:500;
  letter-spacing:.4px;
  padding:13px 15px;
  outline:none;
  transition:border-color .2s,background .2s;
  border-radius:0;-webkit-appearance:none;
}
.f-input::placeholder{color:var(--c-muted);font-style:italic}
.f-input:focus{border-color:var(--c-mid);background:var(--c-raised)}

/* Buttons */
.btn{
  display:block;width:100%;
  font-family:var(--f-display);
  font-size:.58rem;letter-spacing:3px;
  text-transform:uppercase;
  padding:14px 18px;
  transition:all .2s;
  position:relative;
  border-radius:0;
  text-align:center;
}
.btn-p{
  background:var(--c-raised);
  border:1px solid var(--c-bhi);
  color:var(--c-white);
}
.btn-p:hover{background:var(--c-surface);border-color:var(--c-mid)}
.btn-p::after{
  content:'';position:absolute;
  top:0;right:0;
  width:8px;height:8px;
  border-top:1px solid var(--c-mid);
  border-right:1px solid var(--c-mid);
}
.btn-s{
  background:transparent;
  border:1px solid var(--c-border);
  color:var(--c-mid);
}
.btn-s:hover{border-color:var(--c-bhi);color:var(--c-text);background:var(--c-surface)}
.btn-dl{
  background:var(--c-surface);
  border:1px solid var(--c-bhi);
  color:var(--c-bright);
  display:flex;align-items:center;justify-content:center;gap:7px;
  width:100%;
}
.btn-dl:hover{border-color:var(--c-white);color:var(--c-white);background:var(--c-raised)}

.btn-group{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.btn-row{display:grid;grid-template-columns:1fr 1fr;gap:8px}

/* Stats grid */
.stats-grid{
  display:grid;grid-template-columns:1fr 1fr;
  gap:10px;margin-bottom:22px;
}
.stat-box{
  background:var(--c-surface);
  border:1px solid var(--c-border);
  padding:14px;position:relative;
}
.stat-box::after{
  content:'';position:absolute;
  top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,var(--c-bhi),transparent);
}
.stat-tag{
  font-family:var(--f-display);
  font-size:.48rem;letter-spacing:2px;
  color:var(--c-mid);text-transform:uppercase;
  margin-bottom:8px;
  display:flex;align-items:center;gap:5px;
}
.stat-tag::before{
  content:'';width:5px;height:5px;
  background:var(--c-muted);
  clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);
  flex-shrink:0;
}
.stat-num{
  font-family:var(--f-display);
  font-size:1.55rem;font-weight:700;
  color:var(--c-white);line-height:1;
}
.stat-num.init{
  font-size:.6rem;letter-spacing:3px;
  color:var(--c-dim);
}
.count-anim{animation:countIn .3s ease}

/* Card footer */
.c-foot{
  border-top:1px solid var(--c-border);
  padding-top:16px;margin-top:16px;
  display:flex;justify-content:space-between;align-items:center;
}
.c-foot-lbl{
  font-family:var(--f-display);
  font-size:.48rem;letter-spacing:2px;
  color:var(--c-mid);text-transform:uppercase;
}
.subtle-a{
  font-family:var(--f-display);
  font-size:.44rem;letter-spacing:2px;
  color:var(--c-mid);text-transform:uppercase;
  border-bottom:1px solid var(--c-border);
  padding-bottom:2px;
  transition:color .2s,border-color .2s;
}
.subtle-a:hover{color:var(--c-text);border-color:var(--c-mid)}


/* ══════════════════════════════════════════════
   PAGE: HOME / ABOUT
══════════════════════════════════════════════ */
.about-p{
  font-size:1rem;line-height:1.8;
  color:var(--c-text);margin-bottom:12px;
}
.about-p strong{color:var(--c-white);font-weight:600}

.tool-list{list-style:none;display:flex;flex-direction:column;gap:7px}
.tool-list li{
  display:flex;align-items:center;gap:10px;
  font-family:var(--f-display);
  font-size:.55rem;letter-spacing:2px;
  color:var(--c-text);text-transform:uppercase;
  padding:10px 13px;
  background:var(--c-surface);
  border:1px solid var(--c-border);
  transition:border-color .2s;
}
.tool-list li:hover{border-color:var(--c-bhi)}
.tool-list li::before{
  content:'';width:5px;height:5px;
  background:var(--c-dim);
  clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);
  flex-shrink:0;
}
.tool-badge{
  margin-left:auto;
  font-size:.35rem;letter-spacing:2px;
  color:var(--c-dim);
  border:1px solid var(--c-border);
  padding:2px 6px;
}
.tool-badge.live{color:var(--c-mid);border-color:var(--c-bhi)}


/* ══════════════════════════════════════════════
   PAGE: CREDITS
══════════════════════════════════════════════ */
.credit-item{
  display:flex;align-items:flex-start;gap:13px;
  padding:15px 0;
  border-bottom:1px solid var(--c-border);
}
.credit-item:last-child{border-bottom:none;padding-bottom:0}
.credit-idx{
  font-family:var(--f-display);
  font-size:.5rem;letter-spacing:2px;
  color:var(--c-mid);flex-shrink:0;padding-top:2px;
}
.credit-body{flex:1}
.credit-name{
  font-family:var(--f-display);
  font-size:.65rem;letter-spacing:2px;
  color:var(--c-white);text-transform:uppercase;
  margin-bottom:4px;
}
.credit-role{font-size:.92rem;color:var(--c-text);line-height:1.5}
.credit-badge{
  font-family:var(--f-display);
  font-size:.42rem;letter-spacing:2px;
  color:var(--c-mid);border:1px solid var(--c-border);
  padding:2px 6px;text-transform:uppercase;
  flex-shrink:0;align-self:flex-start;margin-top:2px;
}


/* ══════════════════════════════════════════════
   PAGE: BRAT GENERATOR
══════════════════════════════════════════════ */
.img-out{display:none;margin-top:16px}
.img-out.show{display:block}
.img-out img{
  width:100%;display:block;
  border:1px solid var(--c-border);
  cursor:pointer;
  transition:border-color .2s;
}
.img-out img:hover{border-color:var(--c-bhi)}

.img-hint{
  display:none;
  padding:8px 13px;
  background:var(--c-surface);
  border:1px solid var(--c-border);border-top:none;
  font-family:var(--f-display);
  font-size:.45rem;letter-spacing:2px;
  color:var(--c-mid);text-transform:uppercase;text-align:center;
}
.img-hint.show{display:block}
.img-hint span{color:var(--c-bright)}


/* ══════════════════════════════════════════════
   PAGE: TIKTOK DOWNLOADER
══════════════════════════════════════════════ */
.tt-result{display:none;margin-top:16px}
.tt-result.show{display:block}

.tt-thumb{
  position:relative;width:100%;
  aspect-ratio:9/16;max-height:300px;
  overflow:hidden;
  background:var(--c-surface);
  border:1px solid var(--c-border);
  margin-bottom:13px;
}
.tt-thumb img{
  width:100%;height:100%;
  object-fit:cover;display:block;
  filter:brightness(.7);
}
.tt-overlay{
  position:absolute;inset:0;
  background:linear-gradient(to top,rgba(0,0,0,.85) 0%,transparent 55%);
  display:flex;flex-direction:column;
  justify-content:flex-end;padding:14px;
}
.tt-author{
  font-family:var(--f-display);
  font-size:.5rem;letter-spacing:3px;
  color:var(--c-bright);text-transform:uppercase;
  margin-bottom:5px;
}
.tt-title{
  font-size:.92rem;font-weight:500;
  color:var(--c-white);line-height:1.4;
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

.tt-dl-lbl{
  font-family:var(--f-display);
  font-size:.48rem;letter-spacing:3px;
  color:var(--c-mid);text-transform:uppercase;
  margin-bottom:9px;
}

.tt-err{
  display:none;margin-top:13px;
  padding:13px;background:var(--c-surface);
  border:1px solid var(--c-border);
  font-family:var(--f-display);
  font-size:.46rem;letter-spacing:2px;
  color:var(--c-dim);text-transform:uppercase;text-align:center;
}
.tt-err.show{display:block}


/* ══════════════════════════════════════════════
   SITE FOOTER
══════════════════════════════════════════════ */
.site-foot{
  position:relative;z-index:1;
  text-align:center;
  padding:22px 18px;
  font-family:var(--f-display);
  font-size:.46rem;letter-spacing:4px;
  color:var(--c-mid);text-transform:uppercase;
  border-top:1px solid var(--c-border);
  margin-top:16px;
}

</style>
</head>
<body>

<!-- ═══════════════════════════════════════════
     [3] LOADING OVERLAY
═══════════════════════════════════════════ -->
<div id="loading" class="hidden">
  <div class="ring"></div>
  <span class="ring-label" id="loading-label">Processing</span>
</div>


<!-- ═══════════════════════════════════════════
     [4] NAVBAR
═══════════════════════════════════════════ -->
<nav id="navbar">
  <span class="nav-brand">Clairity<em>.tools</em></span>

  <!-- Desktop tabs -->
  <ul class="nav-tabs">
    <li class="n-tab active" data-tab="home">About</li>
    <li class="n-tab"        data-tab="credits">Credits</li>
    <li class="n-tab"        data-tab="brat">Brat Gen</li>
    <li class="n-tab"        data-tab="tiktok">TikTok DL</li>
  </ul>

  <!-- Mobile hamburger -->
  <button class="n-burger" id="n-burger" aria-label="Menu">
    <span></span><span></span><span></span>
  </button>
</nav>

<!-- Mobile drawer -->
<div id="nav-drawer">
  <span class="n-tab active" data-tab="home">About</span>
  <span class="n-tab"        data-tab="credits">Credits</span>
  <span class="n-tab"        data-tab="brat">Brat Gen</span>
  <span class="n-tab"        data-tab="tiktok">TikTok DL</span>
</div>


<!-- ═══════════════════════════════════════════
     PAGE WRAPPER
═══════════════════════════════════════════ -->
<div class="page-wrap">


  <!-- ═══════════════════════════════════════════
       [5] PAGE: HOME / ABOUT
  ═══════════════════════════════════════════ -->
  <section id="page-home" class="tab-page active">

    <p class="pg-eyebrow">Clairity Tools</p>
    <h1 class="pg-title">About <span>/</span></h1>
    <div class="pg-rule"></div>

    <!-- Stats -->
    <div class="stats-grid">
      <div class="stat-box">
        <div class="stat-tag">Visitors</div>
        <div id="stat-visitors" class="stat-num init">···</div>
      </div>
      <div class="stat-box">
        <div class="stat-tag">Requests</div>
        <div id="stat-requests" class="stat-num init">···</div>
      </div>
    </div>

    <!-- About card -->
    <div class="card">
      <div class="c-label">Description</div>
      <p class="about-p">
        <strong>Clairity</strong> is a lightweight toolset for everyday content needs.
        Clean, fast, and built without unnecessary noise — just tools that work.
      </p>
      <p class="about-p">
        Crafted by <strong>xZiyy</strong> with a focus on minimal design and functional APIs.
      </p>

      <div class="hr"></div>

      <div class="c-label">Available Tools</div>
      <ul class="tool-list">
        <li>Brat Image Generator<span class="tool-badge live">Live</span></li>
        <li>TikTok Downloader<span class="tool-badge live">Live</span></li>
        <li>More tools<span class="tool-badge">Soon</span></li>
      </ul>

      <div class="c-foot">
        <span class="c-foot-lbl">WhatsApp Channel</span>
        <a href="https://whatsapp.com/channel/0029VaPNMxNK0IBsKDGFD90K"
           target="_blank" class="subtle-a">Open →</a>
      </div>
    </div>

  </section>


  <!-- ═══════════════════════════════════════════
       [6] PAGE: CREDITS
  ═══════════════════════════════════════════ -->
  <section id="page-credits" class="tab-page">

    <p class="pg-eyebrow">Clairity Tools</p>
    <h1 class="pg-title">Credits <span>/</span></h1>
    <div class="pg-rule"></div>

    <div class="card">
      <div class="c-label">Contributors &amp; Resources</div>

      <div class="credit-item">
        <span class="credit-idx">01</span>
        <div class="credit-body">
          <div class="credit-name">xZiyy</div>
          <div class="credit-role">Developer &amp; designer — frontend, API, and overall concept.</div>
        </div>
        <span class="credit-badge">Author</span>
      </div>

      <div class="credit-item">
        <span class="credit-idx">02</span>
        <div class="credit-body">
          <div class="credit-name">Clairity API</div>
          <div class="credit-role">Backend powering Brat Generator and TikTok Downloader.</div>
        </div>
        <span class="credit-badge">API</span>
      </div>

      <div class="credit-item">
        <span class="credit-idx">03</span>
        <div class="credit-body">
          <div class="credit-name">CountAPI</div>
          <div class="credit-role">Hit counter by Miles Hilliard — visitor &amp; request tracking.</div>
        </div>
        <span class="credit-badge">Service</span>
      </div>

      <div class="credit-item">
        <span class="credit-idx">04</span>
        <div class="credit-body">
          <div class="credit-name">Orbitron &amp; Rajdhani</div>
          <div class="credit-role">Typography via Google Fonts.</div>
        </div>
        <span class="credit-badge">Fonts</span>
      </div>

    </div>

  </section>


  <!-- ═══════════════════════════════════════════
       [7] PAGE: BRAT GENERATOR
  ═══════════════════════════════════════════ -->
  <section id="page-brat" class="tab-page">

    <p class="pg-eyebrow">Clairity Tools</p>
    <h1 class="pg-title">Brat <span>Gen /</span></h1>
    <div class="pg-rule"></div>

    <div class="card">
      <div class="c-label">Generate Image</div>

      <form id="brat-form">
        <label class="f-label" for="brat-input">Text Input</label>
        <input
          id="brat-input"
          type="text"
          placeholder="enter text here..."
          class="f-input"
          autocomplete="off"
        >
        <div class="btn-group">
          <button type="submit" class="btn btn-p">Generate Image</button>
          <button
            type="button"
            class="btn btn-s"
            onclick="window.open('https://whatsapp.com/channel/0029VaPNMxNK0IBsKDGFD90K','_blank')"
          >Try on WhatsApp</button>
        </div>
      </form>

      <!-- Output -->
      <div class="img-out" id="brat-output">
        <img id="brat-img" alt="Generated image">
      </div>
      <div class="img-hint" id="brat-hint">
        <span>↓</span>&nbsp; Click image to download &nbsp;·&nbsp; Klik gambar untuk download
      </div>

    </div>

  </section>


  <!-- ═══════════════════════════════════════════
       [8] PAGE: TIKTOK DOWNLOADER
  ═══════════════════════════════════════════ -->
  <section id="page-tiktok" class="tab-page">

    <p class="pg-eyebrow">Clairity Tools</p>
    <h1 class="pg-title">TikTok <span>DL /</span></h1>
    <div class="pg-rule"></div>

    <div class="card">
      <div class="c-label">Download Video</div>

      <form id="tiktok-form">
        <label class="f-label" for="tiktok-input">TikTok URL</label>
        <input
          id="tiktok-input"
          type="url"
          placeholder="https://www.tiktok.com/@user/video/..."
          class="f-input"
          autocomplete="off"
        >
        <div class="btn-group">
          <button type="submit" class="btn btn-p">Fetch Video</button>
        </div>
      </form>

      <!-- Error -->
      <div class="tt-err" id="tt-err">
        ✕ &nbsp; Failed to fetch. Check the URL and try again.
      </div>

      <!-- Result -->
      <div class="tt-result" id="tt-result">

        <div class="tt-thumb">
          <img id="tt-thumb-img" src="" alt="Thumbnail">
          <div class="tt-overlay">
            <p class="tt-author" id="tt-author"></p>
            <p class="tt-title"  id="tt-title"></p>
          </div>
        </div>

        <p class="tt-dl-lbl">Download Options</p>
        <div class="btn-row">
          <button id="tt-btn-video" class="btn btn-dl">
            ↓ &nbsp;Video (No WM)
          </button>
          <button id="tt-btn-audio" class="btn btn-dl">
            ↓ &nbsp;Audio Only
          </button>
        </div>

      </div>

    </div>

  </section>


</div><!-- /page-wrap -->


<!-- ═══════════════════════════════════════════
     [9] FOOTER
═══════════════════════════════════════════ -->
<footer class="site-foot">
  © 2025 Clairity &nbsp;·&nbsp; Created by xZiyy
</footer>


<!-- ═══════════════════════════════════════════
     [10] JAVASCRIPT
═══════════════════════════════════════════ -->
<script>
'use strict';

/* ──────────────────────────────────────────
   CONFIG — change API URLs here
────────────────────────────────────────── */
const CFG = {
  visitorAPI : 'https://countapi.mileshilliard.com/api/v1/hit/xziyy1153-visitor',
  requestAPI : 'https://countapi.mileshilliard.com/api/v1/hit/xziyy1153-requests',
  bratAPI    : (t) => `https://clairity-api.vercel.app/api/brat?text=${encodeURIComponent(t)}`,
  tiktokAPI  : (u) => `https://clairity-api.vercel.app/api/tiktok?url=${encodeURIComponent(u)}`,
  // Proxy — requires api/proxy.js deployed on your Vercel
  proxyAPI   : (u, f) => `https://clairity-api.vercel.app/api/proxy?url=${encodeURIComponent(u)}&filename=${encodeURIComponent(f)}`,
};

/* ──────────────────────────────────────────
   LOADING HELPERS
────────────────────────────────────────── */
const $loading = document.getElementById('loading');
const $loadLbl = document.getElementById('loading-label');

function showLoad(msg = 'Processing') {
  $loadLbl.textContent = msg;
  $loading.classList.remove('hidden');
}
function hideLoad() {
  $loading.classList.add('hidden');
}

/* ──────────────────────────────────────────
   STATS — CountAPI
   - visitor: hit on every page load
   - requests: hit only on actual generate/download
────────────────────────────────────────── */
async function fetchCount(url) {
  const r = await fetch(url);
  const d = await r.json();
  // CountAPI returns { value: N } or { hits: N } depending on version
  return d.value ?? d.hits ?? d.count ?? null;
}

function setStatNum(id, val) {
  const el = document.getElementById(id);
  if (!el) return;
  el.textContent = (val !== null && val !== undefined) ? val : '—';
  el.classList.remove('init', 'count-anim');
  void el.offsetWidth;
  el.classList.add('count-anim');
}

// Hit visitor counter + update display
async function initVisitor() {
  try {
    const n = await fetchCount(CFG.visitorAPI);
    setStatNum('stat-visitors', n);
  } catch {
    setStatNum('stat-visitors', '—');
  }
}

// Hit request counter + update display
async function hitRequest() {
  try {
    const n = await fetchCount(CFG.requestAPI);
    setStatNum('stat-requests', n);
  } catch { /* silent */ }
}

// Read-only initial request count (use same hit for now — CountAPI increments on every call)
async function initRequests() {
  try {
    const n = await fetchCount(CFG.requestAPI);
    setStatNum('stat-requests', n);
  } catch {
    setStatNum('stat-requests', '—');
  }
}

// Fire on load
initVisitor();
initRequests();

/* ──────────────────────────────────────────
   NAVBAR — Tab System
────────────────────────────────────────── */
const allNavTabs = document.querySelectorAll('.n-tab');
const allPages   = document.querySelectorAll('.tab-page');
const $burger    = document.getElementById('n-burger');
const $drawer    = document.getElementById('nav-drawer');

function switchTab(name) {
  allNavTabs.forEach(t => t.classList.toggle('active', t.dataset.tab === name));
  allPages.forEach(p => p.classList.toggle('active', p.id === `page-${name}`));
  $drawer.classList.remove('open');
}

allNavTabs.forEach(t => t.addEventListener('click', () => switchTab(t.dataset.tab)));
$burger.addEventListener('click', () => $drawer.classList.toggle('open'));

/* ──────────────────────────────────────────
   BRAT GENERATOR
────────────────────────────────────────── */
document.getElementById('brat-form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const text    = document.getElementById('brat-input').value.trim();
  const $output = document.getElementById('brat-output');
  const $img    = document.getElementById('brat-img');
  const $hint   = document.getElementById('brat-hint');

  if (!text) return;

  showLoad('Generating');
  $output.classList.remove('show');
  $hint.classList.remove('show');

  try {
    const res = await fetch(CFG.bratAPI(text));
    if (!res.ok) throw new Error('api error');

    const blob = await res.blob();
    const url  = URL.createObjectURL(blob);

    $img.src = url;
    $output.classList.add('show');
    $hint.classList.add('show');

    $img.onclick = () => {
      const a    = document.createElement('a');
      a.href     = url;
      a.download = 'brat_' + text.toLowerCase().replace(/\s+/g, '_') + '.png';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    };

    // Increment global request count
    hitRequest();

  } catch {
    alert('Failed to generate image. Please try again.');
  } finally {
    hideLoad();
  }
});

/* ──────────────────────────────────────────
   TIKTOK DOWNLOADER
────────────────────────────────────────── */

// Store raw CDN URLs setelah fetch berhasil
let ttVideoUrl = '';
let ttAudioUrl = '';

// Trigger download via proxy (bypass CORS)
function triggerDownload(cdnUrl, filename) {
  if (!cdnUrl) return;
  // Route melalui proxy Vercel — server yg fetch CDN, bukan browser
  const proxyUrl = CFG.proxyAPI(cdnUrl, filename);
  const a = document.createElement('a');
  a.href = proxyUrl;
  a.download = filename;
  a.style.display = 'none';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}

document.getElementById('tt-btn-video').addEventListener('click', () => {
  triggerDownload(ttVideoUrl, 'tiktok_video.mp4');
});

document.getElementById('tt-btn-audio').addEventListener('click', () => {
  triggerDownload(ttAudioUrl, 'tiktok_audio.mp3');
});

document.getElementById('tiktok-form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const url     = document.getElementById('tiktok-input').value.trim();
  const $result = document.getElementById('tt-result');
  const $err    = document.getElementById('tt-err');
  const $thumb  = document.getElementById('tt-thumb-img');
  const $author = document.getElementById('tt-author');
  const $title  = document.getElementById('tt-title');

  if (!url) return;

  showLoad('Fetching');
  $result.classList.remove('show');
  $err.classList.remove('show');
  ttVideoUrl = '';
  ttAudioUrl = '';

  try {
    const res  = await fetch(CFG.tiktokAPI(url));
    const data = await res.json();

    if (!data.status || !data.result) throw new Error('no result');

    const r = data.result;

    $thumb.src          = r.thumbnail || '';
    $author.textContent = r.author    || '';
    $title.textContent  = r.title     || '';

    // Simpan URL CDN untuk dipakai saat tombol download diklik
    ttVideoUrl = r.nowm  || '';
    ttAudioUrl = r.audio || '';

    // Tampilkan/sembunyikan tombol sesuai ketersediaan
    document.getElementById('tt-btn-video').style.opacity = ttVideoUrl ? '1' : '0.3';
    document.getElementById('tt-btn-audio').style.opacity = ttAudioUrl ? '1' : '0.3';

    $result.classList.add('show');
    hitRequest();

  } catch {
    $err.classList.add('show');
  } finally {
    hideLoad();
  }
});
</script>

</body>
</html>
